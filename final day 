import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

@Override
public User registerUser(User user) {
    // Step 1: Initialize BCryptPasswordEncoder
    BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
    
    // Step 2: Encode the password
    String encodedPassword = passwordEncoder.encode(user.getPassword());
    user.setPassword(encodedPassword);

    // Step 3: Extract the last four digits of the Aadhaar ID
    String lastFourAadhar = user.getAadharId().substring(user.getAadharId().length() - 4);

    // Step 4: Create a custom user ID using the last four digits of the Aadhaar ID
    String customUserId = lastFourAadhar;
    user.setUserId(customUserId);

    // Step 5: Save the user in the database
    return userRepository.save(user);
}